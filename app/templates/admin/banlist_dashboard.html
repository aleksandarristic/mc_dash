{% extends "base.html" %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a href="/">Početna</a></li>
    <li class="breadcrumb-item"><a href="{{ url_for('admin_dashboard') }}">Administracija</a></li>
    <li class="breadcrumb-item active" aria-current="page">Ban Lista</li>
  </ol>
</nav>
{% endblock %}

{% block content %}
<h2>Ban Lista</h2>


Banovani igrači:
{% if banlist and banlist['users'] %}
<ul id="banlist-users">
    {% for line in banlist['users'] %}
    <li>{{ line }} <button onclick="unban('{{ line }}')">Unbanuj</button></li>
    {% endfor %}
</ul>
{% else %}
<p>Lista je prazna.</p>
{% endif %}

Banovane IP adrese:
{% if banlist and banlist['ip'] %}
<ul id="banlist-ips">
    {% for line in banlist['ip'] %}
    <li>{{ line }} <button onclick="unban('{{ line }}')">Unbanuj</button></li>
    {% endfor %}
</ul>
{% else %}
<p>Lista je prazna.</p>
{% endif %}

Banovani ID-jevi:
{% if banlist and banlist['ids'] %}
<ul id="banlist-ids">
    {% for line in banlist['ids'] %}
    <li>{{ line }} <button onclick="unban('{{ line }}')">Unbanuj</button></li>
    {% endfor %}
</ul>
{% else %}
<p>Lista je prazna.</p>
{% endif %}


<input id="ban-name" placeholder="Player name" />
<button onclick="ban()">Banuj igrača</button>

<script>
async function ban() {
    const input = document.getElementById("ban-name");
    const player = input.value.trim();
    if (!player) return;
    const res = await fetch("/admin/banlist/add", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ player })
    });
    const data = await res.json();
    alert(data.result);
    location.reload();
}

async function unban(player) {
    const res = await fetch("/admin/banlist/remove", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ player })
    });
    const data = await res.json();
    alert(data.result);
    location.reload();
}
</script>
{% endblock %}
